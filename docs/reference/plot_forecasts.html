<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot forecasts and optional truth for only one selected target variable.
Faceted plots for multiple models, locations and forecast dates are
supported with specified facet formula. — plot_forecasts • covidHubUtils</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plot forecasts and optional truth for only one selected target variable.
Faceted plots for multiple models, locations and forecast dates are
supported with specified facet formula. — plot_forecasts" />
<meta property="og:description" content="Plot forecasts and optional truth for only one selected target variable.
Faceted plots for multiple models, locations and forecast dates are
supported with specified facet formula." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidHubUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/covidHubUtils-overview.html">Tools for working with COVID-19 Forecast Hub data: a brief tour of the `covidHubUtils` R package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot forecasts and optional truth for only one selected target variable.
Faceted plots for multiple models, locations and forecast dates are
supported with specified facet formula.</h1>
    
    <div class="hidden name"><code>plot_forecasts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plot forecasts and optional truth for only one selected target variable.
Faceted plots for multiple models, locations and forecast dates are
supported with specified facet formula.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>plot_forecasts</span><span class='op'>(</span>
  <span class='va'>forecast_data</span>,
  truth_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  hub <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"US"</span>, <span class='st'>"ECDC"</span><span class='op'>)</span>,
  <span class='va'>models</span>,
  <span class='va'>target_variable</span>,
  <span class='va'>locations</span>,
  facet <span class='op'>=</span> <span class='cn'>NULL</span>,
  facet_scales <span class='op'>=</span> <span class='st'>"fixed"</span>,
  facet_nrow <span class='op'>=</span> <span class='cn'>NULL</span>,
  facet_ncol <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>forecast_dates</span>,
  <span class='va'>intervals</span>,
  <span class='va'>horizon</span>,
  <span class='va'>truth_source</span>,
  use_median_as_point <span class='op'>=</span> <span class='cn'>FALSE</span>,
  plot_truth <span class='op'>=</span> <span class='cn'>TRUE</span>,
  plot <span class='op'>=</span> <span class='cn'>TRUE</span>,
  fill_by_model <span class='op'>=</span> <span class='cn'>FALSE</span>,
  fill_transparency <span class='op'>=</span> <span class='fl'>1</span>,
  truth_as_of <span class='op'>=</span> <span class='cn'>NULL</span>,
  title <span class='op'>=</span> <span class='st'>"default"</span>,
  subtitle <span class='op'>=</span> <span class='st'>"default"</span>,
  show_caption <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>forecast_data</th>
      <td><p>data frame with truth and forecasts from load_forecasts()</p></td>
    </tr>
    <tr>
      <th>truth_data</th>
      <td><p>optional data frame from one truth source in the format returned
by load_truth(). It needs to have columns model, target_variable,
target_end_date, location and value.
Model column can be "Observed Data (a truth source)".</p></td>
    </tr>
    <tr>
      <th>hub</th>
      <td><p>character, which hub to use.
Default is "US", other option is "ECDC".</p></td>
    </tr>
    <tr>
      <th>models</th>
      <td><p>vector of strings specifying models to plot.
Default to all models in forecast_data.</p></td>
    </tr>
    <tr>
      <th>target_variable</th>
      <td><p>string specifying target type. It should be one of
"cum death", "inc case", "inc death" and "inc hosp".
"cum death" and "inc hosp" are only available in forecasts from US hub now.
If there is only one target_variable in forecast_data, this parameter is optional.</p></td>
    </tr>
    <tr>
      <th>locations</th>
      <td><p>string for fips code, 'US' or abbreviation of European countries.
Default to all locations in forecast_data.</p></td>
    </tr>
    <tr>
      <th>facet</th>
      <td><p>interpretable facet option for ggplot. Function will error
if multiple locations are passed in without location in the facet formula.</p></td>
    </tr>
    <tr>
      <th>facet_scales</th>
      <td><p>argument for scales in ggplot2::facet_wrap. Default to "fixed".</p></td>
    </tr>
    <tr>
      <th>facet_nrow</th>
      <td><p>number of rows for facetting; optional.</p></td>
    </tr>
    <tr>
      <th>facet_ncol</th>
      <td><p>number of columns for facetting; optional.</p></td>
    </tr>
    <tr>
      <th>forecast_dates</th>
      <td><p>date string vectors for forecast dates to plot.
Default to forecast_dates present in the data.</p></td>
    </tr>
    <tr>
      <th>intervals</th>
      <td><p>values indicating which central prediction interval levels
to plot. NULL means only plotting point forecasts.
If not provided, it will default to c(.5, .8, .95).
When plotting 6 models or more, the plot will be reduced to show .95 interval only.</p></td>
    </tr>
    <tr>
      <th>horizon</th>
      <td><p>forecasts are plotted for the horizon time steps after the
forecast date. Default to all available horizons in forecast data.</p></td>
    </tr>
    <tr>
      <th>truth_source</th>
      <td><p>character specifying where the truth data will
be loaded from if truth_data is not provided. Currently support "JHU",
"USAFacts", "NYTimes", "HealthData" and "ECDC".
Optional if truth_data is provided.</p></td>
    </tr>
    <tr>
      <th>use_median_as_point</th>
      <td><p>boolean for using median quantiles as point forecasts in plot.
Default to FALSE.</p></td>
    </tr>
    <tr>
      <th>plot_truth</th>
      <td><p>boolean for showing truth data in plot. Default to FALSE.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>boolean for showing the plot. Default to TRUE.
Currently supports "JHU","USAFacts", "NYTimes". Default to "JHU".</p></td>
    </tr>
    <tr>
      <th>fill_by_model</th>
      <td><p>boolean for specifying colors in plot.
If TRUE, separate colors will be used for each model.
If FALSE, only blues will be used for all models. Default to FALSE.</p></td>
    </tr>
    <tr>
      <th>fill_transparency</th>
      <td><p>numeric value used to set transparency of intervals.
0 means fully transparent, 1 means opaque.</p></td>
    </tr>
    <tr>
      <th>truth_as_of</th>
      <td><p>the plot includes the truth data that would have been
in real time as of the truth_as_of date (not using this parameter when truth data
is from github repo)</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>optional text for the title of the plot. If left as "default",
the title will be automatically generated. If "none", no title will be plotted.</p></td>
    </tr>
    <tr>
      <th>subtitle</th>
      <td><p>optional text for the subtitle of the plot. If left as "default",
the subtitle will be automatically generated. If "none", no subtitle will be plotted.</p></td>
    </tr>
    <tr>
      <th>show_caption</th>
      <td><p>logical, if TRUE, caption will be included showing data sources</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>invisible ggplot object</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='va'>us_forecasts</span> <span class='op'>&lt;-</span><span class='fu'><a href='load_latest_forecasts.html'>load_latest_forecasts</a></span><span class='op'>(</span></span>
<span class='r-in'>  models <span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"COVIDhub-ensemble"</span>,<span class='st'>"COVIDhub-baseline"</span>,</span>
<span class='r-in'>  <span class='st'>"JHU_CSSE-DECOM"</span>,<span class='st'>"CovidAnalytics-DELPHI"</span>,</span>
<span class='r-in'>  <span class='st'>"LANL-GrowthRate"</span>, <span class='st'>"Microsoft-DeepSTIA"</span><span class='op'>)</span>,</span>
<span class='r-in'>  last_forecast_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.time.html'>Sys.Date</a></span><span class='op'>(</span><span class='op'>)</span>,</span>
<span class='r-in'>  forecast_date_window_size <span class='op'>=</span> <span class='fl'>6</span>,</span>
<span class='r-in'>  locations <span class='op'>=</span> <span class='st'>"US"</span>,</span>
<span class='r-in'>  types <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"point"</span>,<span class='st'>"quantile"</span><span class='op'>)</span>,</span>
<span class='r-in'>  targets <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>, <span class='st'>"wk ahead inc case"</span><span class='op'>)</span>,</span>
<span class='r-in'>  source <span class='op'>=</span> <span class='st'>"zoltar"</span><span class='op'>)</span></span>
<span class='r-in'> </span>
<span class='r-in'><span class='fu'>plot_forecasts</span><span class='op'>(</span>forecast_data <span class='op'>=</span> <span class='va'>us_forecasts</span>,</span>
<span class='r-in'>  models <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"COVIDhub-ensemble"</span>,<span class='st'>"COVIDhub-baseline"</span>,<span class='st'>"JHU_CSSE-DECOM"</span>,</span>
<span class='r-in'>  <span class='st'>"CovidAnalytics-DELPHI"</span>,<span class='st'>"LANL-GrowthRate"</span>, <span class='st'>"Microsoft-DeepSTIA"</span><span class='op'>)</span>,</span>
<span class='r-in'>  target_variable <span class='op'>=</span> <span class='st'>"inc case"</span>, locations <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"US"</span><span class='op'>)</span>, intervals <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.95</span><span class='op'>)</span>,</span>
<span class='r-in'>  horizon <span class='op'>=</span> <span class='fl'>4</span>, truth_source <span class='op'>=</span> <span class='st'>"JHU"</span>, plot <span class='op'>=</span> <span class='cn'>TRUE</span>, fill_by_model <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span class='r-in'>  facet <span class='op'>=</span> <span class='op'>~</span><span class='va'>model</span>, facet_scales <span class='op'>=</span> <span class='st'>"fixed"</span>, title <span class='op'>=</span> <span class='st'>"default"</span>,</span>
<span class='r-in'>  show_caption <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>ecdc_forecasts</span> <span class='op'>&lt;-</span> <span class='fu'><a href='load_latest_forecasts.html'>load_latest_forecasts</a></span><span class='op'>(</span>models<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ILM-EKF"</span><span class='op'>)</span>,</span>
<span class='r-in'>  hub <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ECDC"</span>,<span class='st'>"US"</span><span class='op'>)</span>, last_forecast_date <span class='op'>=</span> <span class='st'>"2021-03-08"</span>,</span>
<span class='r-in'>  forecast_date_window_size <span class='op'>=</span> <span class='fl'>0</span>,</span>
<span class='r-in'>  locations <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"GB"</span><span class='op'>)</span>,</span>
<span class='r-in'>  targets <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>, <span class='st'>"wk ahead inc death"</span><span class='op'>)</span>,</span>
<span class='r-in'>  source <span class='op'>=</span> <span class='st'>"zoltar"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>plot_forecasts</span><span class='op'>(</span>forecast_data <span class='op'>=</span> <span class='va'>ecdc_forecasts</span>, </span>
<span class='r-in'>               hub  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ECDC"</span>,<span class='st'>"US"</span><span class='op'>)</span>, </span>
<span class='r-in'>               locations <span class='op'>=</span><span class='st'>"GB"</span>, </span>
<span class='r-in'>               truth_source <span class='op'>=</span> <span class='st'>"JHU"</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Serena Wang, Ariane Stark, Evan L Ray, Nikos I. Bosse, Nicholas G. Reich, Nutcha Wattanachit.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


